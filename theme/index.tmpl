{% extends "base.tmpl" %}

{% block seo %}

<title>{{site.Name}}</title>
<link rel="canonical" href="{{site.URL}}">
<meta property="og:url" content="{{site.URL}}"/>
<meta property="og:title" content="{{site.Name}}"/>
<meta property="og:description" content="{{site.Description}}"/>
<meta property="og:type" content="website" />
<meta property="og:image" content="https://firebasestorage.googleapis.com/v0/b/darshansharma-ur.appspot.com/o/images%2F286366543_436060667935480_6479411762365981172_n.jpeg?alt=media&token=0dbe8925-c5ca-420a-a2f1-63d51fb74ee2" />
<meta name="twitter:title" content="{{site.Name}}" />
<meta name="twitter:image" content="https://firebasestorage.googleapis.com/v0/b/darshansharma-ur.appspot.com/o/images%2F286366543_436060667935480_6479411762365981172_n.jpeg?alt=media&token=0dbe8925-c5ca-420a-a2f1-63d51fb74ee2" />
<meta name="description" content="{{site.Description}}"/>
<meta name="twitter:description" content="{{site.Description}}" />
<script type="application/ld+json">
  {
    "@context": "https://schema.org/",
    "@type": "BlogPosting",
      "headline": "{{site.Name}}",
      "url": "{{site.URL}}",
      "description": "{{site.Description}}",
      "image": "https://firebasestorage.googleapis.com/v0/b/darshansharma-ur.appspot.com/o/images%2F286366543_436060667935480_6479411762365981172_n.jpeg?alt=media&token=0dbe8925-c5ca-420a-a2f1-63d51fb74ee2",
      "author": {
        "@type": "Person",
        "name": "{{user.Name}}"
      }
  }
  </script>

  <script type="text/javascript">

  function addEmail(){

    try{
      
      console.log('Sending your request to main server ...');
      let userEmail = document.getElementById("email").value;
      let data = JSON.stringify({
        "email": userEmail
      });

      var xhr = new XMLHttpRequest();
      xhr.open("POST", "https://us-central1-darshansharma-ur.cloudfunctions.net/addEmail");
      xhr.setRequestHeader("Content-Type", "application/json");

      xhr.send(data);
      xhr.addEventListener("readystatechange", function() {
      if(this.readyState === 4) {
    
        document.getElementById("success-response").style.visibility = "visible";
        document.getElementById("success-response").style.color = "#00BF63";
        document.getElementById("success-response").style.fontWeight = "bold";
        document.getElementById("success-response").innerHTML = "Thanks for subscribing. You will enjoy it !!";
    
  } else {
        document.getElementById("success-response").style.visibility = "visible";
        document.getElementById("success-response").style.color = "#E86D79";
        document.getElementById("success-response").style.fontWeight = "bold";
        document.getElementById("error-response").innerHTML = "Please try some time later. Some problem with server";
    
  }

  setTimeout(() => {
    document.getElementById("email").value = "";
    document.getElementById("success-response").style.visibility = "hidden";
    document.getElementById("error-response").style.visibility = "hidden";

},5000);

});

    
    }

    catch(err) {
      document.getElementById("success-response").style.visibility = "visible";
      document.getElementById("success-response").style.color = "#E86D79";
      document.getElementById("success-response").style.fontWeight = "bold";
      document.getElementById("error-response").innerHTML = "Please try again later.";

      setTimeout(() => {
      document.getElementById("email").value = "";
      document.getElementById("success-response").style.visibility = "hidden";
      document.getElementById("error-response").style.visibility = "hidden";

    },5000);
    }

    }
  

</script>
{% endblock %}

{% block content %}

<section class="center">
  <header class="tc pv2 pv3-ns">
    <img src="https://firebasestorage.googleapis.com/v0/b/darshansharma-ur.appspot.com/o/images%2F286366543_436060667935480_6479411762365981172_n.jpeg?alt=media&token=0dbe8925-c5ca-420a-a2f1-63d51fb74ee2" class="br-100 pa1 h5 w5 ba b--black-10" alt="avatar">
    <h1 class="dim black b f2 tc db mb3 mb4-ns">Darshan Sharma</h1>
    <h2 class="f4 mid-gray fw2">It is good to have you here</h2>
  </header>

  <article class="f4 lh-copy">      
    <p>
      Who am I? I know this much that this is wrong question.<br />Right question is What am I?
    </p>
  </article>
</section>

<section class="bt b--black-10 center">
  <h2 class="tc dim black b f2">Latest Articles</h2>      
  {% for entry in entries |slice:":4" %}

  <article class="pv4 bb b--black-10 ph3 ph0-l">
    <div class="flex flex-column">
      <div class="w-100 pr3-ns order-2 order-1-ns">
        <small>
          <time datetime="{{entry.PublishAt | slice: ":11" }}" class="black">
            {{ entry.PublishAt }}
          </time>
        </small>
        <a href="{{site.URL}}/{{entry.Slug}}" class="link">
          <h2 class="f3 mt0 black lh-title">{{entry.Title}}</h2>
        </a>
        <p class="f5 f4-l lh-copy">
          {{ entry.Excerpt }}&hellip;
        </p>
      </div>
    </div>   
    <small class="black">
      {% for tag in entry.Tags %}
        <a href="{{site.URL}}/tags/{{tag}}/" class="link" target="_blank">#{{tag}}</a>
        {% if not forloop.Last %}, {% endif %}
      {% endfor %}
    </small>
  </article>
  {% endfor %}
  </section>
<section class="pa4-l" id="subscription-sections">
      <form class="bg-near-white mw7 center pa4 br2-ns" id="subscribe-form" name="subscribe-form" class="validate">
      <fieldset class="cf bn ma0 pa0">
        <p>Subscribe</p>
        </legend>
        <div class="cf"> 
          <label class="clip" for="email-address">Email Address</label>
          <input class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"
            type="email" value="" name="EMAIL" class="required email" id="email" required aria-label="email-label">
            <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-dark-gray white pointer w-100 w-25-m w-20-l br2-ns br--right-ns"
              type="button" value="Subscribe" name="subscribe" id="subscribe" class="button" onClick="addEmail()">
              <div class="response" id="error-response" style="visibility:hidden"></div>
              <div class="response" id="success-response" style="visibility:hidden"></div>
            </div>
      </fieldset>
    </form>
</section>
{% endblock %}
